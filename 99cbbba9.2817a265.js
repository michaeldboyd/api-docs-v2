/*! For license information please see 99cbbba9.2817a265.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{148:function(e,n,t){"use strict";t.r(n),t.d(n,"frontMatter",(function(){return l})),t.d(n,"metadata",(function(){return s})),t.d(n,"rightToc",(function(){return b})),t.d(n,"default",(function(){return p}));var a=t(1),i=t(9),o=(t(0),t(165)),c=t(187),r=t(188),l={id:"connections",title:"Connections",sidebar_label:"Connections"},s={id:"connections",title:"Connections",description:"import Tabs from '@theme/Tabs';",source:"@site/docs/connections.mdx",permalink:"/docs/connections",sidebar_label:"Connections",sidebar:"someSidebar",previous:{title:"FAQ",permalink:"/docs/faq"},next:{title:"Credentials Overview",permalink:"/docs/credentials"}},b=[{value:"Creating new connection (invitation)",id:"creating-new-connection-invitation",children:[{value:"Parameters",id:"parameters",children:[]},{value:"Response",id:"response",children:[]},{value:"API Reference",id:"api-reference",children:[]}]},{value:"Retrieving connections data",id:"retrieving-connections-data",children:[{value:"Response",id:"response-1",children:[]},{value:"API Reference",id:"api-reference-1",children:[]}]},{value:"Sending invitations to users",id:"sending-invitations-to-users",children:[{value:"Encoding invitations as QR code",id:"encoding-invitations-as-qr-code",children:[]},{value:"Using invitations with deep links",id:"using-invitations-with-deep-links",children:[]}]}],d={rightToc:b};function p(e){var n=e.components,t=Object(i.a)(e,["components"]);return Object(o.b)("wrapper",Object(a.a)({},d,t,{components:n,mdxType:"MDXLayout"}),Object(o.b)("p",null,"Connections represent a peer-to-peer relationship using a pairwise key exchange. When two parties establish a connection, they can exchange various data messages securely."),Object(o.b)("p",null,"Connections are a set unique pairwise keys that are only used for communication between the parties involved in the connection relationship. Connections are negotiated with an exchange of messages and start with an invitation message."),Object(o.b)("p",null,"In our API, each connection is represened with a ",Object(o.b)("inlineCode",{parentName:"p"},"connectionId")," and this identifier is used to reference this connection throughout the different endpoints."),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"The process of establishing connections is described in ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/hyperledger/aries-rfcs/tree/master/features/0023-did-exchange"}),"Aries RFC 0023: DID Exchange Protocol 1.0"))),Object(o.b)("h2",{id:"creating-new-connection-invitation"},"Creating new connection (invitation)"),Object(o.b)("p",null,"To create a new invitation, call the ",Object(o.b)("inlineCode",{parentName:"p"},"POST /connections")," endpoint or use the service clients for your platform."),Object(o.b)(c.a,{defaultValue:"cs",values:[{label:"C#",value:"cs"},{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(o.b)(r.a,{value:"js",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'    const connection = await client.createConnection({\n        connectionInvitationParameters: {\n            connectionId: "unique id", \n            multiParty: false\n        }\n    });\n'))),Object(o.b)(r.a,{value:"cs",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"var connectionId = await client.CreateConnectionAsync(new ConnectionInvitationParameters());\n")))),Object(o.b)("h3",{id:"parameters"},"Parameters"),Object(o.b)("p",null,"You can specify the following optional parameters."),Object(o.b)("ul",null,Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"connectionId")," ",Object(o.b)("em",{parentName:"li"},"[string optional]")," - Unique connection identifier. If not specified, a random one will be generated. You can use this field to associate user identifiers with identifers in your internal systems. This can be an email, login, or other unique id."),Object(o.b)("li",{parentName:"ul"},Object(o.b)("inlineCode",{parentName:"li"},"multiParty")," ",Object(o.b)("em",{parentName:"li"},"[bool optional]")," - If set to ",Object(o.b)("inlineCode",{parentName:"li"},"true"),", the invitation can be used by multiple parties and will always have the status set to ",Object(o.b)("inlineCode",{parentName:"li"},"Invited"),".\nWhen a party accepts this invitation, a new connection record with a unique identifier will be created. Default value is ",Object(o.b)("inlineCode",{parentName:"li"},"false"),".")),Object(o.b)("h3",{id:"response"},"Response"),Object(o.b)("p",null,"Creating a connection responds with the same response body as the ",Object(o.b)("a",Object(a.a)({parentName:"p"},{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/GetConnection"}),"GET /Connections/{credentialId} endpoint")),Object(o.b)("p",null,"(Shown below)"),Object(o.b)("h3",{id:"api-reference"},"API Reference"),Object(o.b)("p",null,"Try creating a connection at the ",Object(o.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/CreateConnection",target:"_blank"},"CreateConnection")," -\n",Object(o.b)("inlineCode",{parentName:"p"},"POST /connections")),Object(o.b)("h2",{id:"retrieving-connections-data"},"Retrieving connections data"),Object(o.b)("p",null,"To get the details of a connection (including invitation details), call the ",Object(o.b)("inlineCode",{parentName:"p"},"GET /connections/{connectionId}")," endpoint, by passing the connection identifier you obtained as result when creating new connection."),Object(o.b)(c.a,{defaultValue:"cs",values:[{label:"C#",value:"cs"},{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(o.b)(r.a,{value:"js",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"const connectionContract = await client.getConnection(connectionId);\n"))),Object(o.b)(r.a,{value:"cs",mdxType:"TabItem"},Object(o.b)("pre",null,Object(o.b)("code",Object(a.a)({parentName:"pre"},{className:"language-cs"}),"var connectionContract = await client.GetConnectionAsync(connectionId);\n")))),Object(o.b)("h3",{id:"response-1"},"Response"),Object(o.b)("p",null,"The response of this operation is an object of type ",Object(o.b)("inlineCode",{parentName:"p"},"ConnectionContract"),". This object contains the following fields"),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Field"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Type"),Object(o.b)("th",Object(a.a)({parentName:"tr"},{align:null}),"Description"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"connectionId")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"string")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Unique connection identifier. Can be passed when creating new connection. If not, a randon one is assigned.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"state")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"string")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"The state of the current connections. The value can be ",Object(o.b)("inlineCode",{parentName:"td"},"Invited"),", ",Object(o.b)("inlineCode",{parentName:"td"},"Negotiating"),", ",Object(o.b)("inlineCode",{parentName:"td"},"Connected"),". In order to successfully exchange messages and credentials with a certain connection, it must be in the ",Object(o.b)("inlineCode",{parentName:"td"},"Connected")," state. This state will be set automatically when both parties successfully exchange their DIDs.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"invitation")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"string")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"Represents the encoded invitation JSON as Base64 string. You can use this data to encode it into a URL or a QR code. See details below.")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"invitationUrl")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),Object(o.b)("em",{parentName:"td"},"string")),Object(o.b)("td",Object(a.a)({parentName:"tr"},{align:null}),"This is simply a convenience URL that we encoded and shortened. When called, it will resolve (and redirect) to a long form URL that contains the full invitation message. This URL can be presented as QR code as is. Our mobile agent app is able to scan and decode QR codes encoded with this URL.")))),Object(o.b)("h3",{id:"api-reference-1"},"API Reference"),Object(o.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Connections/GetConnection",target:"_blank"},"GetConnection")," - `GET /connections/","{connectionId}","`",Object(o.b)("h2",{id:"sending-invitations-to-users"},"Sending invitations to users"),Object(o.b)("p",null,"There are few ways to send connection invitation to users. They can be sent as a URL link, encoded as QR code, or just JSON. Each approach depends on what the invitee's agent is capable of. When the invitee is using a mobile agent, the most common approach is either a QR code or deep link URL."),Object(o.b)("h3",{id:"encoding-invitations-as-qr-code"},"Encoding invitations as QR code"),Object(o.b)("p",null,"To encode the invitation as QR code, a certain direction has been accepted by the community. This approach, however, is not strictly standardized. It will work with the Streetcred mobile app. ",Object(o.b)("br",null),"\nQR codes should decode into a URL of the format below"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"[url_scheme]://[host]?c_i=[invitation_data]")),Object(o.b)("p",null,"Example:"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"https://example.com/?c_i=...")),Object(o.b)("p",null,"A quick and simple way to get a QR code is by using Google Chart API. Simply pass your URL to the Google endpoint"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"https://chart.googleapis.com/chart?cht=qr&chl=[INVITATION_URL]&chs=200x200&chld=L|1")),Object(o.b)("p",null,"When mobile apps scan this code, they will look for the query parameter ",Object(o.b)("inlineCode",{parentName:"p"},"c_i")," and use the value of this parameter to decode the Base64 Url encoded string into a Connection Invitation Message. The URL scheme and host can be anything. They are generally used as utility to redirect the user to a friendly page that directs the user to download mobile agents. ",Object(o.b)("br",null),"\nURL schemes can also be used as deep linking tool, to launch mobile agents directly from the link. This is useful if you're developing custom agent apps and would like to support connections and invitations in a convenient user experience."),Object(o.b)("h3",{id:"using-invitations-with-deep-links"},"Using invitations with deep links"),Object(o.b)("p",null,"To prepare an invitation with a custom deep link URL scheme, simply format the URL"),Object(o.b)("p",null,Object(o.b)("inlineCode",{parentName:"p"},"my_custom_scheme://launch/?c_i=[INVITATION_DATA]")),Object(o.b)("p",null,"The invitation data is retreived from your connection record in the field ",Object(o.b)("inlineCode",{parentName:"p"},"invitation")," (not ",Object(o.b)("inlineCode",{parentName:"p"},"invitationUrl"),")."),Object(o.b)("p",null,"The Streetcred Mobile App uses the following custom deep link URL:\n",Object(o.b)("inlineCode",{parentName:"p"},"id.streetcred://launch?c_i=[INVITATION_DATA]")," "),Object(o.b)("blockquote",null,Object(o.b)("p",{parentName:"blockquote"},"If you open the ",Object(o.b)("inlineCode",{parentName:"p"},"invitationUrl")," from the connection record from a mobile device, it will try to launch our mobile agent app.")))}p.isMDXComponent=!0},164:function(e,n,t){var a;!function(){"use strict";var t={}.hasOwnProperty;function i(){for(var e=[],n=0;n<arguments.length;n++){var a=arguments[n];if(a){var o=typeof a;if("string"===o||"number"===o)e.push(a);else if(Array.isArray(a)&&a.length){var c=i.apply(null,a);c&&e.push(c)}else if("object"===o)for(var r in a)t.call(a,r)&&a[r]&&e.push(r)}}return e.join(" ")}e.exports?(i.default=i,e.exports=i):void 0===(a=function(){return i}.apply(n,[]))||(e.exports=a)}()},165:function(e,n,t){"use strict";t.d(n,"a",(function(){return d})),t.d(n,"b",(function(){return m}));var a=t(0),i=t.n(a);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function c(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);n&&(a=a.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,a)}return t}function r(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?c(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):c(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,a,i=function(e,n){if(null==e)return{};var t,a,i={},o=Object.keys(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||(i[t]=e[t]);return i}(e,n);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)t=o[a],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(i[t]=e[t])}return i}var s=i.a.createContext({}),b=function(e){var n=i.a.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):r({},n,{},e)),t},d=function(e){var n=b(e.components);return i.a.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return i.a.createElement(i.a.Fragment,{},n)}},u=Object(a.forwardRef)((function(e,n){var t=e.components,a=e.mdxType,o=e.originalType,c=e.parentName,s=l(e,["components","mdxType","originalType","parentName"]),d=b(t),u=a,m=d["".concat(c,".").concat(u)]||d[u]||p[u]||o;return t?i.a.createElement(m,r({ref:n},s,{components:t})):i.a.createElement(m,r({ref:n},s))}));function m(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var o=t.length,c=new Array(o);c[0]=u;var r={};for(var l in n)hasOwnProperty.call(n,l)&&(r[l]=n[l]);r.originalType=e,r.mdxType="string"==typeof e?e:a,c[1]=r;for(var s=2;s<o;s++)c[s]=t[s];return i.a.createElement.apply(null,c)}return i.a.createElement.apply(null,t)}u.displayName="MDXCreateElement"},187:function(e,n,t){"use strict";t(23),t(18),t(19);var a=t(0),i=t.n(a),o=t(164),c=t.n(o),r=t(122),l=t.n(r),s=37,b=39;n.a=function(e){var n=e.block,t=e.children,o=e.defaultValue,r=e.values,d=Object(a.useState)(o),p=d[0],u=d[1],m=[];return i.a.createElement("div",null,i.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:c()("tabs",{"tabs--block":n})},r.map((function(e){var n=e.value,t=e.label;return i.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":p===n,className:c()("tab-item",l.a.tabItem,{"tab-item--active":p===n}),key:n,ref:function(e){return m.push(e)},onKeyDown:function(e){return function(e,n,t){switch(t.keyCode){case b:!function(e,n){var t=e.indexOf(n)+1;e[t]?e[t].focus():e[0].focus()}(e,n);break;case s:!function(e,n){var t=e.indexOf(n)-1;e[t]?e[t].focus():e[e.length-1].focus()}(e,n)}}(m,e.target,e)},onFocus:function(){return u(n)},onClick:function(){return u(n)}},t)}))),i.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(t).filter((function(e){return e.props.value===p}))[0]))}},188:function(e,n,t){"use strict";var a=t(0),i=t.n(a);n.a=function(e){return i.a.createElement("div",null,e.children)}}}]);
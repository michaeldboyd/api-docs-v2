/*! For license information please see ebb9b4ae.35401623.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[33],{157:function(e,t,n){"use strict";n.r(t),n.d(t,"frontMatter",(function(){return o})),n.d(t,"metadata",(function(){return s})),n.d(t,"rightToc",(function(){return d})),n.d(t,"default",(function(){return b}));var a=n(1),r=n(9),i=(n(0),n(165)),c=n(187),l=n(188),o={id:"credentials",title:"Credentials Overview",sidebar_label:"Credentials"},s={id:"credentials",title:"Credentials Overview",description:"import Tabs from '@theme/Tabs';",source:"@site/docs/credentials.mdx",permalink:"/docs/credentials",sidebar_label:"Credentials",sidebar:"someSidebar",previous:{title:"Connections",permalink:"/docs/connections"},next:{title:"Verifications",permalink:"/docs/verifications"}},d=[{value:"Introduction",id:"introduction",children:[]},{value:"Create Schemas",id:"create-schemas",children:[{value:"Create Credential Definitions",id:"create-credential-definitions",children:[]}]},{value:"Steps to Issue a Credential",id:"steps-to-issue-a-credential",children:[{value:"1. Send a Credential Offer",id:"1-send-a-credential-offer",children:[]},{value:"2. Wait for a Credential Request",id:"2-wait-for-a-credential-request",children:[]},{value:"3. Issue Credential",id:"3-issue-credential",children:[]}]},{value:"Revoke a Credential",id:"revoke-a-credential",children:[]}],u={rightToc:d};function b(e){var t=e.components,n=Object(r.a)(e,["components"]);return Object(i.b)("wrapper",Object(a.a)({},u,n,{components:t,mdxType:"MDXLayout"}),Object(i.b)("h2",{id:"introduction"},"Introduction"),Object(i.b)("p",null,"Credentials are one of the key concepts of self-sovereign identity. We follow the Hyperledger Aries ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://github.com/hyperledger/aries-rfcs/tree/master/features/0036-issue-credential"}),"Issue Credential Protocol 1.0")," as defined by the linked RFC. "),Object(i.b)("p",null,"In our API, this protocol is represented using the ",Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Credentials"}),"Credentials Endpoints")),Object(i.b)("p",null,"A credential is given as type CredentialContract, as shown below: "),Object(i.b)(c.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "credentialId": "string",\n  "state": "Offered",\n  "connectionId": "string",\n  "definitionId": "string",\n  "schemaId": "string",\n  "values": {\n    "additionalProp1": "string",\n    "additionalProp2": "string",\n    "additionalProp3": "string"\n  }\n}\n\n')))),Object(i.b)("h2",{id:"create-schemas"},"Create Schemas"),Object(i.b)(c.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'const schema = await client.createSchema({\n    schemaParameters: {\n        name: "Employee Badge",\n        version: "1.0",\n        attrNames: [\n            "Name",\n            "Role",\n            "Email"\n        ]\n    }\n});\n')))),Object(i.b)("h3",{id:"create-credential-definitions"},"Create Credential Definitions"),Object(i.b)("h4",{id:"custom"},"Custom"),Object(i.b)(c.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),'var credentialDefinition = await client.createCredentialDefinition({\n    credentialDefinitionFromSchemaParameters: {\n        name: "Hooli Employee Badge",\n        version: "1.0",\n        attrNames: ["Name", "Role", "Email"],\n        supportRevocation: false,\n        tag: "unique identifier"\n    }\n});\n')))),Object(i.b)("h4",{id:"from-schema"},"From Schema"),Object(i.b)(c.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(i.b)(l.a,{value:"js",mdxType:"TabItem"},Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-javascript"}),'var credentialDefinition = await client.createCredentialDefinition(schemaId, {\n    credentialDefinitionFromSchemaParameters: {\n        supportRevocation: true,\n        tag: "unique identifier"\n    }\n});\n')))),Object(i.b)("h2",{id:"steps-to-issue-a-credential"},"Steps to Issue a Credential"),Object(i.b)("p",null,"There are 3 steps in issuing a credential to a digital wallet.  "),Object(i.b)("ol",null,Object(i.b)("li",{parentName:"ol"},"Offer Credential"),Object(i.b)("li",{parentName:"ol"},"Request Credential"),Object(i.b)("li",{parentName:"ol"},"Issue Credential")),Object(i.b)("p",null,"Our API offers two endpoints to accomplish the issuer initiated steps 1 & 3. "),Object(i.b)("h3",{id:"1-send-a-credential-offer"},"1. Send a Credential Offer"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Credentials/CreateCredential"}),Object(i.b)("inlineCode",{parentName:"a"},"POST /credentials"))),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-json"}),'{\n  "definitionId": "string",\n  "connectionId": "string",\n  "credentialValues": {\n    "additionalProp1": "string",\n    "additionalProp2": "string",\n    "additionalProp3": "string"\n  }\n}\n')),Object(i.b)("h4",{id:"samples-clients"},"Samples Clients"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// Create a credential definition\nvar credentialDefinition = await client.createCredentialDefinition(...);\n\n// Invite someone to connect\nvar connection = await client.createConnection(...);\n\n// Create a Credential and send it to the connection\nvar credentialOffer = await client.createCredential({\n    definitionId: credentialDefinition.definitionId,\n    connectionId: connection.connectionId\n});\n")),Object(i.b)("p",null,"This will send a credential offer of the specified ",Object(i.b)("inlineCode",{parentName:"p"},"definitionId")," to the specified ",Object(i.b)("inlineCode",{parentName:"p"},"connectionId"),". "),Object(i.b)("p",null,"This offer will include a dictionary of ",Object(i.b)("inlineCode",{parentName:"p"},"credentialValues"),", which will be the values of the credential attributes. "),Object(i.b)("p",null,"Each key:value pair in the credentialValues object should correspond to the list of attributes in the specified definition. "),Object(i.b)("p",null,"The list of keys should match the ",Object(i.b)("inlineCode",{parentName:"p"},"attributeName")," list that is in the Credential definition."),Object(i.b)("h3",{id:"2-wait-for-a-credential-request"},"2. Wait for a Credential Request"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"  // you must now wait for the holder to accept the credential. \n  // you can use webhooks to be notified once the holder accepts, or \n  // get the credential record from your wallet to check for yourself.\n  credential = await client.getCredential(credential.credentialId);\n")),Object(i.b)("h3",{id:"3-issue-credential"},"3. Issue Credential"),Object(i.b)("p",null,Object(i.b)("a",Object(a.a)({parentName:"p"},{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Credentials/IssueCredential"}),"PUT /credentials/{credentialId}")),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"// The potential credential states are: \n// 'Offered' | 'Requested' | 'Issued' | 'Rejected' | 'Revoked'\nif(credential.state === 'Requested')\n{\n    await client.issueCredential(credential.credentialId);\n} \n")),Object(i.b)("p",null,"This simply needs the credential identifier. If the credential is in state ",Object(i.b)("inlineCode",{parentName:"p"},"requested"),", the credential will be issued to the digital wallet of the individual who accepted that offered credential. "),Object(i.b)("h2",{id:"revoke-a-credential"},"Revoke a Credential"),Object(i.b)("p",null,"A credential can be revoked by using the following commands:"),Object(i.b)("pre",null,Object(i.b)("code",Object(a.a)({parentName:"pre"},{className:"language-js"}),"  await client.revokeCredential(credentialId);\n")))}b.isMDXComponent=!0},164:function(e,t,n){var a;!function(){"use strict";var n={}.hasOwnProperty;function r(){for(var e=[],t=0;t<arguments.length;t++){var a=arguments[t];if(a){var i=typeof a;if("string"===i||"number"===i)e.push(a);else if(Array.isArray(a)&&a.length){var c=r.apply(null,a);c&&e.push(c)}else if("object"===i)for(var l in a)n.call(a,l)&&a[l]&&e.push(l)}}return e.join(" ")}e.exports?(r.default=r,e.exports=r):void 0===(a=function(){return r}.apply(t,[]))||(e.exports=a)}()},165:function(e,t,n){"use strict";n.d(t,"a",(function(){return u})),n.d(t,"b",(function(){return f}));var a=n(0),r=n.n(a);function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function o(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=r.a.createContext({}),d=function(e){var t=r.a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):l({},t,{},e)),n},u=function(e){var t=d(e.components);return r.a.createElement(s.Provider,{value:t},e.children)},b={inlineCode:"code",wrapper:function(e){var t=e.children;return r.a.createElement(r.a.Fragment,{},t)}},p=Object(a.forwardRef)((function(e,t){var n=e.components,a=e.mdxType,i=e.originalType,c=e.parentName,s=o(e,["components","mdxType","originalType","parentName"]),u=d(n),p=a,f=u["".concat(c,".").concat(p)]||u[p]||b[p]||i;return n?r.a.createElement(f,l({ref:t},s,{components:n})):r.a.createElement(f,l({ref:t},s))}));function f(e,t){var n=arguments,a=t&&t.mdxType;if("string"==typeof e||a){var i=n.length,c=new Array(i);c[0]=p;var l={};for(var o in t)hasOwnProperty.call(t,o)&&(l[o]=t[o]);l.originalType=e,l.mdxType="string"==typeof e?e:a,c[1]=l;for(var s=2;s<i;s++)c[s]=n[s];return r.a.createElement.apply(null,c)}return r.a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},187:function(e,t,n){"use strict";n(23),n(18),n(19);var a=n(0),r=n.n(a),i=n(164),c=n.n(i),l=n(122),o=n.n(l),s=37,d=39;t.a=function(e){var t=e.block,n=e.children,i=e.defaultValue,l=e.values,u=Object(a.useState)(i),b=u[0],p=u[1],f=[];return r.a.createElement("div",null,r.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:c()("tabs",{"tabs--block":t})},l.map((function(e){var t=e.value,n=e.label;return r.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":b===t,className:c()("tab-item",o.a.tabItem,{"tab-item--active":b===t}),key:t,ref:function(e){return f.push(e)},onKeyDown:function(e){return function(e,t,n){switch(n.keyCode){case d:!function(e,t){var n=e.indexOf(t)+1;e[n]?e[n].focus():e[0].focus()}(e,t);break;case s:!function(e,t){var n=e.indexOf(t)-1;e[n]?e[n].focus():e[e.length-1].focus()}(e,t)}}(f,e.target,e)},onFocus:function(){return p(t)},onClick:function(){return p(t)}},n)}))),r.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},a.Children.toArray(n).filter((function(e){return e.props.value===b}))[0]))}},188:function(e,t,n){"use strict";var a=n(0),r=n.n(a);t.a=function(e){return r.a.createElement("div",null,e.children)}}}]);
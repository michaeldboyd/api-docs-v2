/*! For license information please see d5e52131.3ff601c9.js.LICENSE.txt */
(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{153:function(e,t,a){"use strict";a.r(t),a.d(t,"frontMatter",(function(){return l})),a.d(t,"metadata",(function(){return c})),a.d(t,"rightToc",(function(){return s})),a.d(t,"default",(function(){return p}));var n=a(1),o=a(9),r=(a(0),a(165)),b=a(187),i=a(188),l={id:"webhooks",title:"Webhooks",sidebar_label:"Webhooks"},c={id:"webhooks",title:"Webhooks",description:"import Tabs from '@theme/Tabs';",source:"@site/docs/webhooks.mdx",permalink:"/docs/webhooks",sidebar_label:"Webhooks",sidebar:"someSidebar",previous:{title:"Organizations",permalink:"/docs/organizations"},next:{title:"Our APIs",permalink:"/docs/api"}},s=[{value:"Introduction",id:"introduction",children:[{value:"Parameters",id:"parameters",children:[]},{value:"API Reference",id:"api-reference",children:[]}]},{value:"Setup your webhook endpoint",id:"setup-your-webhook-endpoint",children:[{value:"Parameters",id:"parameters-1",children:[]}]},{value:"List registered webhooks",id:"list-registered-webhooks",children:[{value:"Response",id:"response",children:[]},{value:"API Reference",id:"api-reference-1",children:[]}]},{value:"Enable or disable a webhook",id:"enable-or-disable-a-webhook",children:[{value:"Parameters",id:"parameters-2",children:[]},{value:"API Reference",id:"api-reference-2",children:[]}]},{value:"Remove a webhook",id:"remove-a-webhook",children:[{value:"Parameters",id:"parameters-3",children:[]},{value:"API Reference",id:"api-reference-3",children:[]}]}],d={rightToc:s};function p(e){var t=e.components,a=Object(o.a)(e,["components"]);return Object(r.b)("wrapper",Object(n.a)({},d,a,{components:t,mdxType:"MDXLayout"}),Object(r.b)("h2",{id:"introduction"},"Introduction"),Object(r.b)("p",null,"Webhooks allow you to connect your hosted agency tenant with your internal service. They can be used to notify you when an agent message is processed by your agentWebhooks are scoped to a tenant. You can register up to 5 notification webhooks for each tenant."),Object(r.b)("p",null,"There are two types of webhooks"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},"Notification webhooks - used to setup alerts and notifications after an agent message of any type is processed"),Object(r.b)("li",{parentName:"ul"},"Endorser webhooks ",Object(r.b)("strong",{parentName:"li"},"Coming soon")," - used to call another running agent to sign a request that will be submitted to the ledger.")),Object(r.b)("blockquote",null,Object(r.b)("p",{parentName:"blockquote"},"To use endorser signing webhooks you must setup your tenant for delegated signing during registration."),Object(r.b)("h2",Object(n.a)({parentName:"blockquote"},{id:"create-a-notification-webhook"}),"Create a notification webhook")),Object(r.b)("p",null,"To create new notification webhook, use the ",Object(r.b)("inlineCode",{parentName:"p"},"POST /webhooks")," endpoint, or use the service client as described below."),Object(r.b)(b.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"},{label:"C#",value:"cs"}],mdxType:"Tabs"},Object(r.b)(i.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),'const result = await client.createWebhook({\n    webhookParameters: {\n        "url": "<your_endpoint_url>",\n        "type": "Notification"\n    }\n});\nconsole.log("Webhook created: " + result.id);\n'))),Object(r.b)(i.a,{value:"cs",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-cs"}),'var webhook = await client.CreateWebhookAsync(new WebhookParameters\n{\n    Url = "<your_endpoint_url>",\n    Type = "Notification"\n});\nConsole.WriteLine($"Webhook created: {result.Id}");\n')))),Object(r.b)("h3",{id:"parameters"},"Parameters"),Object(r.b)("p",null,"You can specify the following required parameters."),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"url")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("em",{parentName:"td"},"string required")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Your webhook URL. This address must be publicly accessible and will be called everytime a new agent message is proceessed by your agent. This only includes incoming messages.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"type")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("em",{parentName:"td"},"string required")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The type of webhook. Possible values are ",Object(r.b)("inlineCode",{parentName:"td"},"Notification"),", ",Object(r.b)("inlineCode",{parentName:"td"},"DelegatedSigning"),". Currently, only ",Object(r.b)("inlineCode",{parentName:"td"},"Notification")," webhooks are supported.")))),Object(r.b)("h3",{id:"api-reference"},"API Reference"),Object(r.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Webhooks/CreateWebhook",target:"_blank"},"CreateWebhook")," - `POST /webhooks\u200b`",Object(r.b)("h2",{id:"setup-your-webhook-endpoint"},"Setup your webhook endpoint"),Object(r.b)("p",null,"To setup a listening webhook in your service, your endpoint must listen to ",Object(r.b)("inlineCode",{parentName:"p"},"POST")," http message. The body of the request will have the following parameters. The content of the body will be set to ",Object(r.b)("inlineCode",{parentName:"p"},"application/json"),"."),Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-json"}),'POST \'https://your/webhook/url\'\nContent-Type: application/json\n\nBody:\n{\n    "message_type": "new_connection",\n    "object_id": "00000000",\n    "data": {\n        "param1": "value1",\n        "param2": "value2"\n        // ...\n    }\n}\n')),Object(r.b)("h3",{id:"parameters-1"},"Parameters"),Object(r.b)("table",null,Object(r.b)("thead",{parentName:"table"},Object(r.b)("tr",{parentName:"thead"},Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Field"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Type"),Object(r.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Description"))),Object(r.b)("tbody",{parentName:"table"},Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"message_type")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("em",{parentName:"td"},"string")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Indicates the type of the event/message. Possible values are ",Object(r.b)("inlineCode",{parentName:"td"},"new_connection"),", ",Object(r.b)("inlineCode",{parentName:"td"},"credential_request"),", ",Object(r.b)("inlineCode",{parentName:"td"},"verification"),", ",Object(r.b)("inlineCode",{parentName:"td"},"credential_authentication")," or ",Object(r.b)("inlineCode",{parentName:"td"},"new_inbox_message"),".")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"object_id")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("em",{parentName:"td"},"string")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"The object identifier for the affected record. This can be the ",Object(r.b)("inlineCode",{parentName:"td"},"connectionId")," when message type is ",Object(r.b)("inlineCode",{parentName:"td"},"new_connection"),", or ",Object(r.b)("inlineCode",{parentName:"td"},"credentialId")," if the message type is ",Object(r.b)("inlineCode",{parentName:"td"},"credential_request"),", etc.")),Object(r.b)("tr",{parentName:"tbody"},Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("inlineCode",{parentName:"td"},"data")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(r.b)("em",{parentName:"td"},"name/value dictionary")),Object(r.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"Additional data about this object. In most cases, this will contain ",Object(r.b)("inlineCode",{parentName:"td"},"ConnectionId")," to indicate the connection associated with this event.")))),Object(r.b)("h2",{id:"list-registered-webhooks"},"List registered webhooks"),Object(r.b)("p",null,"To get a list of all registered webhooks, call the ",Object(r.b)("inlineCode",{parentName:"p"},"GET /webhooks")," endpoint or use the service client for your platform."),Object(r.b)(b.a,{defaultValue:"js",values:[{label:"Javascript",value:"js"},{label:"C#",value:"cs"}],mdxType:"Tabs"},Object(r.b)(i.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"const webhooks = await client.listWebhooks();\n"))),Object(r.b)(i.a,{value:"cs",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-cs"}),"var webhooks = await client.ListWebhooksAsync();\n")))),Object(r.b)("h3",{id:"response"},"Response"),Object(r.b)("p",null,"Collection of ",Object(r.b)("inlineCode",{parentName:"p"},"WebhookContract")),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"id"),"\t",Object(r.b)("em",{parentName:"li"},"[string]")," - Webhook identifier"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"url"),"\t",Object(r.b)("em",{parentName:"li"},"[string]")," - Webhook endpoint url"),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"type")," ",Object(r.b)("em",{parentName:"li"},"[string]")," - The type of the webhook. Possible values are: ",Object(r.b)("inlineCode",{parentName:"li"},"Notification"),", ",Object(r.b)("inlineCode",{parentName:"li"},"DelegatedSigning")),Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"enabled"),"\t",Object(r.b)("em",{parentName:"li"},"[boolean]")," - Indicates if the webhook is enabled or disabled.")),Object(r.b)("h3",{id:"api-reference-1"},"API Reference"),Object(r.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Webhooks/ListWebhooks",target:"_blank"},"ListWebhooks")," - `GET /webhooks`",Object(r.b)("h2",{id:"enable-or-disable-a-webhook"},"Enable or disable a webhook"),Object(r.b)("p",null,"You can disable some webhooks to temporarily prevent them from being invoked. Only webhooks that are enabled will be called by your hosted agent."),Object(r.b)("p",null,"To disable a webhook, call the ",Object(r.b)("inlineCode",{parentName:"p"},"PUT /webhooks\u200b/{webhookId}\u200b/disable")," endpoint. Similarly, to enable a webhook call the ",Object(r.b)("inlineCode",{parentName:"p"},"PUT /webhooks\u200b/{webhookId}\u200b/enable")," endpoint or use the service clients as described below."),Object(r.b)(b.a,{defaultValue:"js",values:[{label:"C#",value:"cs"},{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(r.b)(i.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"// Disable a webhook\nawait client.disableWebhook(webhookId);\n\n// Enable a webhook\nawait client.enableWebhook(webhookId);\n"))),Object(r.b)(i.a,{value:"cs",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-cs"}),"// Disable a webhook\nawait client.DisableWebhooksAsync(webhookId);\n\n// Enable a webhook\nawait client.EnableWebhooksAsync(webhookId);\n")))),Object(r.b)("h3",{id:"parameters-2"},"Parameters"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"webhookId")," ",Object(r.b)("em",{parentName:"li"},"[string required]")," - The webhook identifier")),Object(r.b)("h3",{id:"api-reference-2"},"API Reference"),Object(r.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Webhooks/EnableWebhook",target:"_blank"},"EnableWebhook")," - `PUT /webhooks\u200b/","{webhookId}","\u200b/enable`",Object(r.b)("br",null),Object(r.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Webhooks/DisableWebhook",target:"_blank"},"DisableWebhook")," - `PUT /webhooks\u200b/","{webhookId}","\u200b/disable`",Object(r.b)("h2",{id:"remove-a-webhook"},"Remove a webhook"),Object(r.b)("p",null,"To remove a webhook permanently, call the ",Object(r.b)("inlineCode",{parentName:"p"},"DELETE /webhooks/{webhookId}")," endpoint or use the service clients as described below."),Object(r.b)(b.a,{defaultValue:"js",values:[{label:"C#",value:"cs"},{label:"Javascript",value:"js"}],mdxType:"Tabs"},Object(r.b)(i.a,{value:"js",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-js"}),"await client.removeWebhook(webhookId);\n"))),Object(r.b)(i.a,{value:"cs",mdxType:"TabItem"},Object(r.b)("pre",null,Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-cs"}),"await client.RemoveWebhookAsync(webhookId);\n")))),Object(r.b)("h3",{id:"parameters-3"},"Parameters"),Object(r.b)("ul",null,Object(r.b)("li",{parentName:"ul"},Object(r.b)("inlineCode",{parentName:"li"},"webhookId")," ",Object(r.b)("em",{parentName:"li"},"[string required]")," - The webhook identifier")),Object(r.b)("h3",{id:"api-reference-3"},"API Reference"),Object(r.b)("a",{href:"https://app.swaggerhub.com/apis-docs/Streetcred/agency/v1#/Webhooks/RemoveWebhook",target:"_blank"},"RemoveWebhook")," - `DELETE /webhooks\u200b/","{webhookId}","\u200b`",Object(r.b)("p",null,"Notification webhooks are used to setup alerts and notifications after an agent message of any type is processed by your hosted agent. Webhooks can be setup in any runtime that can listen to incoming HTTP traffic."))}p.isMDXComponent=!0},164:function(e,t,a){var n;!function(){"use strict";var a={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var r=typeof n;if("string"===r||"number"===r)e.push(n);else if(Array.isArray(n)&&n.length){var b=o.apply(null,n);b&&e.push(b)}else if("object"===r)for(var i in n)a.call(n,i)&&n[i]&&e.push(i)}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},165:function(e,t,a){"use strict";a.d(t,"a",(function(){return d})),a.d(t,"b",(function(){return m}));var n=a(0),o=a.n(n);function r(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function b(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}function i(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?b(Object(a),!0).forEach((function(t){r(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):b(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function l(e,t){if(null==e)return{};var a,n,o=function(e,t){if(null==e)return{};var a,n,o={},r=Object.keys(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||(o[a]=e[a]);return o}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(n=0;n<r.length;n++)a=r[n],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(o[a]=e[a])}return o}var c=o.a.createContext({}),s=function(e){var t=o.a.useContext(c),a=t;return e&&(a="function"==typeof e?e(t):i({},t,{},e)),a},d=function(e){var t=s(e.components);return o.a.createElement(c.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return o.a.createElement(o.a.Fragment,{},t)}},u=Object(n.forwardRef)((function(e,t){var a=e.components,n=e.mdxType,r=e.originalType,b=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),d=s(a),u=n,m=d["".concat(b,".").concat(u)]||d[u]||p[u]||r;return a?o.a.createElement(m,i({ref:t},c,{components:a})):o.a.createElement(m,i({ref:t},c))}));function m(e,t){var a=arguments,n=t&&t.mdxType;if("string"==typeof e||n){var r=a.length,b=new Array(r);b[0]=u;var i={};for(var l in t)hasOwnProperty.call(t,l)&&(i[l]=t[l]);i.originalType=e,i.mdxType="string"==typeof e?e:n,b[1]=i;for(var c=2;c<r;c++)b[c]=a[c];return o.a.createElement.apply(null,b)}return o.a.createElement.apply(null,a)}u.displayName="MDXCreateElement"},187:function(e,t,a){"use strict";a(23),a(18),a(19);var n=a(0),o=a.n(n),r=a(164),b=a.n(r),i=a(122),l=a.n(i),c=37,s=39;t.a=function(e){var t=e.block,a=e.children,r=e.defaultValue,i=e.values,d=Object(n.useState)(r),p=d[0],u=d[1],m=[];return o.a.createElement("div",null,o.a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:b()("tabs",{"tabs--block":t})},i.map((function(e){var t=e.value,a=e.label;return o.a.createElement("li",{role:"tab",tabIndex:"0","aria-selected":p===t,className:b()("tab-item",l.a.tabItem,{"tab-item--active":p===t}),key:t,ref:function(e){return m.push(e)},onKeyDown:function(e){return function(e,t,a){switch(a.keyCode){case s:!function(e,t){var a=e.indexOf(t)+1;e[a]?e[a].focus():e[0].focus()}(e,t);break;case c:!function(e,t){var a=e.indexOf(t)-1;e[a]?e[a].focus():e[e.length-1].focus()}(e,t)}}(m,e.target,e)},onFocus:function(){return u(t)},onClick:function(){return u(t)}},a)}))),o.a.createElement("div",{role:"tabpanel",className:"margin-vert--md"},n.Children.toArray(a).filter((function(e){return e.props.value===p}))[0]))}},188:function(e,t,a){"use strict";var n=a(0),o=a.n(n);t.a=function(e){return o.a.createElement("div",null,e.children)}}}]);